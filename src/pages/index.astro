---
import { getCollection } from "astro:content";

import Layout from "@/layouts/Layout.astro";
import DancingText from "@/components/shared/DancingText.astro";
import SocialLinks from "@/components/SocialLinks.astro";
import PostCard from "@/components/PostCard.astro";
import ProjectCard from "@/components/ProjectCard.astro";
import Link from "@/components/shared/Link.astro";
import convertAsteriskToStrongTag from "@/utils/convertAsteriskToStrongTag";

import presentation from "@/data/presentation";
import projects from "@/data/projects";
import { enrichChumpData } from "@/utils/chump_calculations";

const posts = await getCollection("posts");
let rawChumps = await getCollection("chumps");
let enrichedChumps = enrichChumpData(rawChumps);

// newest chump
const newestChump = enrichedChumps[0];

import removeTrailingSlash from "@/utils/removeTrailingSlash";

const pathname = removeTrailingSlash(Astro.url.pathname);
---

<Layout>
    <article class="flex flex-col gap-4 text-center">
      <!-- center text -->
      <div class="cute-border flex flex-row justify-center items-center gap-2 h-24" style="flex-direction: column; height: fit-content;">
        <div class="days_container" style="display: flex; flex-direction: row; align-items: center; height: 100px;">
          <DancingText text={newestChump.data.streak.toString()} /> 
          <div>
            days ago
          </div>
        </div>
        <div class="days_as_of" style="display: flex; flex-direction: row; align-items: center;">
          <h2>
          on 
          <span style="font-weight: bolder;">
            {newestChump.data.date.toLocaleDateString("en-GB", {
            weekday: "long",
            day: "numeric",
            month: "long",
            year: "numeric",
            })}
          </span>
          </h2>
        </div>
      </div>

      <div class="cute-border">
        <div class="wrapper">
          <div class="wordart radial">
              <span class="text" data-text="Topless in Transit: Yokohama Truck Gets a Free Roof Reduction">Topless in Transit: Yokohama Truck Gets a Free Roof Reduction</span>
          </div>
      </div>
      </div>
      <div class="parent cute-border">
        <img class="image1" src={newestChump.data.image}/>
        <img class="image2" src="images/fire_border_60_speed.gif" />
        <img class="image3" src="images/general/bloodbar1.gif" />
      </div>

    </article>
</Layout>
